### ASM和Javassist 字节码生成框架的比较

原文链接：https://www.jianshu.com/p/f2a4c7d3745d

##### javassist：
- Javassist (Java编程助手)使操作Java字节码变得简单。它是一个用于编辑Java字节码的类库；跟其他类似的字节码编辑器不同的是，它使Java程序能够在运行时定义一个新类，并在JVM加载类文件时修改它。
- Javassist提供了两种级别的API：源级别和字节码级别。如果用户使用源代码级API，他们可以不需要了解Java字节码的规范的前提下编辑类文件。整个API仅使用Java语言的词汇表设计。甚至你可以以源文本的形式插入字节码中；Javassist动态编译它。另一方面，字节码级API允许用户作为编辑器直接编辑类文件。
- Javassist允许您检查、编辑和创建Java二进制类。
- Javassist并不是唯一处理字节码的库，但它有一个特别功能，使其成为一个重要的开始来尝试字节码工作：你可以使用Javassist改变一个Java类的字节码而不需要学习任何关于字节码或Java虚拟机(JVM)的体系结构。
- 面向切面编程：Javassist可以是一个很好的工具用于向类中添加新方法，以及在调用方和被调用方两边插入before/after/around通知。
- 反射：Javassist另一个应用就是运行时反射；Javassist允许Java程序使用一个元对象，该元对象控制基级别对象上的方法调用。不需要专门的编译器或虚拟机。
- Javassist还提供了用于直接编辑类文件的低级API。要使用此级别的API，您需要详细了解Java字节码和类文件格式，而此级别的API允许您对类文件进行任何类型的修改。

##### asm： 

- ASM是一个通用的Java字节码操作和分析框架。它可以直接以二进制形式修改现有类或动态生成类。提供了通用的转换和分析算法，允许轻松地组装定制的复杂转换和代码分析工具。
- ASM提供了与其他字节码框架类似的功能，但它关注的是使用的简单性和性能。因为它的设计和实现尽可能的小和快，所以它非常适合在动态系统中使用。
- ASM是一个Java类操作工具，用于动态生成和操作Java类，这是实现可适应系统的有用技术。ASM基于一种新的方法，与现有的相似工具相比，后者包括使用“访问者”设计模式，而不显式地用对象表示被访问的树。对于大多数实际需求，这种新方法比现有的工具提供了更好的性能。
 
##### javassist和asm主要区别
```text
javassist：提供了更高级的API，执行效率相对较差，但无需掌握字节码指令的知识，对使用者要求较低

asm: 直接操作字节码指令，执行效率高，使用者需要掌握Java类字节码文件格式及指令，对使用者的要求比较高


Javassist源级别的API比ASM中实际的字节码操作更易于使用
Javassist在复杂的字节码级别的操作上提供了更高级别的抽象层。
Javassist源级别的API几乎不需要或不需要实际字节码的知识，因此实现起来更加容易和快捷。
与在运行时使用Classworking技术的ASM相比，Javassist使用了反射机制，该机制使其速度更慢。
总体而言，ASM比Javassist更快，并且性能更好。
Javassist使用Java源代码的简化版本，然后将其编译为字节码。
这使得Javassist非常易于使用，但同时也将字节码的使用限制为可以在Javassist源代码的限制范围内表达的字节码。
总而言之，如果有人需要更轻松地动态操作或创建Java类的方法，则应使用Javassist API，而性能是关键问题，则应使用ASM库。

```
